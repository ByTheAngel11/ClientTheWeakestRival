<Page x:Class="WPFTheWeakestRival.ModifyProfilePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Modificar Perfil"
      Width="660" Height="360"
    MinWidth="640" MinHeight="340">

    <Grid Margin="16" Grid.IsSharedSizeScope="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Título más compacto -->
        <TextBlock Text="Modificar Perfil"
                   FontSize="20" FontWeight="Bold"
                   Margin="0,0,0,10"/>

        <!-- Contenido -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <!-- preview -->
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="*"/>
                <!-- formulario -->
            </Grid.ColumnDefinitions>

            <!-- Vista previa compacta -->
            <Border Grid.Column="0"
                    BorderBrush="#DDD" BorderThickness="1"
                    CornerRadius="8" Padding="8" Margin="0,0,0,41">
                <Image x:Name="imgPreview"
                       Width="180" Height="180"
                       Stretch="UniformToFill"
                       SnapsToDevicePixels="True"
                       RenderOptions.BitmapScalingMode="HighQuality"/>
            </Border>

            <!-- Formulario: etiquetas y campos alineados -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Labels"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Email -->
                <TextBlock Grid.Row="0" Grid.Column="0"
                           Text="Email:" VerticalAlignment="Center"/>
                <TextBox x:Name="txtEmail"
                         Grid.Row="0" Grid.Column="2"
                         MaxLength="320"
                         MinWidth="240" Height="26"/>

                <!-- Display name -->
                <TextBlock Grid.Row="2" Grid.Column="0"
                           Text="Nombre para mostrar:" VerticalAlignment="Center"/>
                <TextBox x:Name="txtDisplayName"
                         Grid.Row="2" Grid.Column="2"
                         MaxLength="80"
                         MinWidth="240" Height="26"/>

                <!-- URL + botones -->
                <TextBlock Grid.Row="4" Grid.Column="0"
                           Text="URL de Avatar:" VerticalAlignment="Center"/>
                <Grid Grid.Row="4" Grid.Column="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Caja con trimming para que no rompa el ancho -->
                    <TextBox x:Name="txtAvatarUrl"
                             Grid.Column="0" IsReadOnly="True"
                             MaxLength="500" Height="26"
                             Margin="0,0,8,0"/>

                    <Button x:Name="btnBrowse"
                            Grid.Column="1"
                            Content="Examinar…"
                            Width="96" Height="26"
                            Margin="0,0,8,0"
                            Click="BtnBrowse_Click"/>

                    <Button Grid.Column="2"
                            Content="Quitar"
                            Width="80" Height="26"
                            Click="BtnClearImage_Click"/>
                </Grid>
            </Grid>
        </Grid>

        <!-- Acciones compactas -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,12,0,0">
            <Button Content="Cancelar" Width="96" Height="28" Margin="0,0,8,0"
                    Click="BtnCancel_Click"/>
            <Button Content="Guardar" Width="110" Height="28"
                    Click="BtnSave_Click"/>
        </StackPanel>
    </Grid>
</Page>
